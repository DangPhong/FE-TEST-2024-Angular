"use strict";(self.webpackChunkFE_TEST_2024_Angular=self.webpackChunkFE_TEST_2024_Angular||[]).push([[327],{3327:(L,c,s)=>{s.r(c),s.d(c,{UpsertBlogPageModule:()=>J});var r=s(6814),g=s(7483),d=s(8645),h=s(2096),v=s(8180),b=s(9773),T=s(9274),t=s(5879),p=s(9597),U=s(1863),f=s(4221),Z=s(390),l=s(95);function x(i,u){if(1&i&&(t.TgZ(0,"b"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" Edit ",e.titlePage,"")}}function A(i,u){if(1&i&&(t.TgZ(0,"b"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" Create ",e.titlePage,"")}}function B(i,u){if(1&i&&t._UZ(0,"img",15),2&i){const e=t.oxw();t.Q6J("src",e.formGroup.value.image,t.LSH)}}let I=(()=>{class i{set item(e){e.data?.id?this.formGroup.setValue({id:e.data?.id,title:e.data.title,content:e.data.content,comments_count:e.data.comments_count,image:e.data?.image?.url}):this.formGroup=this.fb.group({id:["",[]],title:["",l.kI.required],content:["",[l.kI.required]],comments_count:[""],image:[""]})}constructor(e,o){this.fb=e,this.cd=o,this.file=null,this.titlePage="Blog",this.emitActionSubmit=new t.vpe,this.formGroup=this.fb.group({id:["",[]],title:["",l.kI.required],content:["",[l.kI.required]],comments_count:[""],image:["",l.kI.required]})}askSave(){this.emitActionSubmit.emit({action:this.formGroup.value.id?"edit":"create",value:{id:this.formGroup.value.id||null,blog:{title:this.formGroup.value.title,content:this.formGroup.value.content,image:this.file}}})}uploadFile(e){const o=new FileReader;if(e.target.files&&e.target.files.length){const[n]=e.target.files;o.readAsDataURL(n),o.onload=()=>{this.formGroup.patchValue({image:o.result}),this.file=e.target.files[0],this.cd.markForCheck()}}}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(l.qu),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-upsert-blog-tpml"]],inputs:{titlePage:"titlePage",item:"item"},outputs:{emitActionSubmit:"emitActionSubmit"},decls:25,vars:5,consts:[[1,"header"],[1,"table-title"],[1,"row"],[4,"ngIf"],[3,"formGroup","submit"],[1,"form-group"],["for","exampleInputTitle"],["type","text","id","exampleInputTitle","formControlName","title","aria-describedby","title",1,"form-control"],["id","emailHelp",1,"form-text","text-muted"],["for","exampleInputContent"],["formControlName","content","id","exampleInputContent",1,"form-control"],["for","exampleInputURLImage"],["class","d-block img-fluid","alt","image",3,"src",4,"ngIf"],["type","file","id","exampleInputURLImage",3,"change"],["type","submit",1,"btn","btn-primary",3,"disabled"],["alt","image",1,"d-block","img-fluid",3,"src"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),t.YNc(4,x,2,1,"b",3),t.YNc(5,A,2,1,"b",3),t.qZA()()()(),t.TgZ(6,"form",4),t.NdJ("submit",function(){return n.askSave()}),t.TgZ(7,"div",5)(8,"label",6),t._uU(9,"Title"),t.qZA(),t._UZ(10,"input",7),t.TgZ(11,"small",8),t._uU(12,"Title of blog"),t.qZA()(),t.TgZ(13,"div",5)(14,"label",9),t._uU(15,"Content"),t.qZA(),t._UZ(16,"textarea",10),t.qZA(),t.TgZ(17,"div",5)(18,"label",11),t._uU(19,"Image"),t.qZA(),t.TgZ(20,"div"),t.YNc(21,B,1,1,"img",12),t.TgZ(22,"input",13),t.NdJ("change",function(m){return n.uploadFile(m)}),t.qZA()()(),t.TgZ(23,"button",14),t._uU(24," Submit "),t.qZA()()),2&o&&(t.xp6(4),t.Q6J("ngIf",n.formGroup.value.id),t.xp6(1),t.Q6J("ngIf",!n.formGroup.value.id),t.xp6(1),t.Q6J("formGroup",n.formGroup),t.xp6(15),t.Q6J("ngIf",n.formGroup.value.image),t.xp6(2),t.Q6J("disabled",!n.formGroup.valid))},dependencies:[r.O5,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u]})}return i})();function C(i,u){if(1&i&&(t.TgZ(0,"app-loading"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Oqu(e.isLoading)}}let y=(()=>{class i{constructor(e,o,n,a,m){this.route=e,this.service=o,this.store=n,this.router=a,this.actionListener$=m,this.notifier=new d.x,this.isLoading=!1}ngOnDestroy(){this.item=(0,h.of)(null),this.notifier.unsubscribe()}ngOnInit(){this.route.paramMap.subscribe(e=>{e?.params?.id?this.service.fetchBlogDetailData(e?.params?.id):this.service.clearStore()}),this.item=this.service.getBlogDetailData(),this.actionListener$.pipe((0,g.l4)(T.hu),(0,v.q)(1)).subscribe(()=>{setTimeout(()=>{this.router.navigate(["blogs"])},500)}),this.service.getIsLoading().pipe((0,b.R)(this.notifier)).subscribe(e=>{this.isLoading=e})}upsertBlog(e){const{value:n}=e;this.service.upsertBlog(n)}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(p.gz),t.Y36(U.G),t.Y36(f.yh),t.Y36(p.F0),t.Y36(f.UO))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-upsert-blog-page"]],decls:3,vars:4,consts:[[4,"ngIf"],[3,"item","emitActionSubmit"]],template:function(o,n){1&o&&(t.YNc(0,C,2,1,"app-loading",0),t.TgZ(1,"app-upsert-blog-tpml",1),t.NdJ("emitActionSubmit",function(m){return n.upsertBlog(m)}),t.ALo(2,"async"),t.qZA()),2&o&&(t.Q6J("ngIf",n.isLoading),t.xp6(1),t.Q6J("item",t.lcZ(2,2,n.item)))},dependencies:[Z.N,r.O5,I,r.Ov]})}return i})(),G=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[r.ez,l.UX]})}return i})();var S=s(8734);let J=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[S.I,r.ez,g.sQ,G,p.Bz.forChild([{path:"",component:y}])]})}return i})()}}]);