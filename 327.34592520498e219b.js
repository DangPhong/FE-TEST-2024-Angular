"use strict";(self.webpackChunkFE_TEST_2024_Angular=self.webpackChunkFE_TEST_2024_Angular||[]).push([[327],{3327:(G,c,n)=>{n.r(c),n.d(c,{UpsertBlogPageModule:()=>S});var l=n(6814),p=n(7483),v=n(8645),b=n(2096),g=n(8180),f=n(9274),t=n(5879),u=n(9597),T=n(1863),d=n(4221),U=n(390),a=n(95);function Z(i,h){if(1&i&&(t.TgZ(0,"b"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" Edit ",e.titlePage,"")}}function A(i,h){if(1&i&&(t.TgZ(0,"b"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" Create ",e.titlePage,"")}}let x=(()=>{class i{set item(e){e.data?.id?this.formGroup.setValue({id:e.data?.id,title:e.data.title,content:e.data.content,comments_count:e.data.comments_count,image:e.data?.image?.url}):this.formGroup=this.fb.group({id:["",[]],title:["",a.kI.required],content:["",[a.kI.required]],comments_count:[""],image:[""]})}constructor(e){this.fb=e,this.file=null,this.titlePage="Blog Detail",this.emitActionSubmit=new t.vpe,this.formGroup=this.fb.group({id:["",[]],title:["",a.kI.required],content:["",[a.kI.required]],comments_count:[""],image:[""]})}ngOnChanges(e){}askSave(){let e=new FormData;e.append("blog[title]",this.formGroup.value.title),e.append("blog[content]",this.formGroup.value.content),this.file&&e.append("blog[image]",this.formGroup.value.image),console.log("formData",e);const o={action:this.formGroup.value.id?"edit":"create",value:e};console.log("payload",o),this.emitActionSubmit.emit(o)}selectFile(e){this.formGroup.value.image=e.target.files[0]}uploadFile(e){console.log("eve",e);let o=e.target.files[0];(new FormData).append("file",o,o.name),this.file=o}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(a.qu))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-upsert-blog-tpml"]],inputs:{titlePage:"titlePage",item:"item"},outputs:{emitActionSubmit:"emitActionSubmit"},features:[t.TTD],decls:23,vars:4,consts:[[1,"header"],[1,"table-title"],[1,"row"],[4,"ngIf"],[3,"formGroup","submit"],[1,"form-group"],["for","exampleInputTitle"],["type","text","id","exampleInputTitle","formControlName","title","aria-describedby","title",1,"form-control"],["id","emailHelp",1,"form-text","text-muted"],["for","exampleInputContent"],["formControlName","content","id","exampleInputContent",1,"form-control"],["for","exampleInputURLImage"],["type","file","id","exampleInputURLImage",1,"form-control",3,"change"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(o,s){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),t.YNc(4,Z,2,1,"b",3),t.YNc(5,A,2,1,"b",3),t.qZA()()()(),t.TgZ(6,"form",4),t.NdJ("submit",function(){return s.askSave()}),t.TgZ(7,"div",5)(8,"label",6),t._uU(9,"Title"),t.qZA(),t._UZ(10,"input",7),t.TgZ(11,"small",8),t._uU(12,"Title of blog"),t.qZA()(),t.TgZ(13,"div",5)(14,"label",9),t._uU(15,"Content"),t.qZA(),t._UZ(16,"textarea",10),t.qZA(),t.TgZ(17,"div",5)(18,"label",11),t._uU(19,"URl Image"),t.qZA(),t.TgZ(20,"input",12),t.NdJ("change",function(r){return s.uploadFile(r)}),t.qZA()(),t.TgZ(21,"button",13),t._uU(22," Submit "),t.qZA()()),2&o&&(t.xp6(4),t.Q6J("ngIf",s.formGroup.value.id),t.xp6(1),t.Q6J("ngIf",!s.formGroup.value.id),t.xp6(1),t.Q6J("formGroup",s.formGroup),t.xp6(15),t.Q6J("disabled",!s.formGroup.valid))},dependencies:[l.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u]})}return i})();function B(i,h){if(1&i&&(t.TgZ(0,"app-loading"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Oqu(e.isLoading)}}let C=(()=>{class i{constructor(e,o,s,m,r){this.route=e,this.service=o,this.store=s,this.router=m,this.actionListener$=r,this.notifier=new v.x,this.isLoading=!0}ngOnDestroy(){this.item=(0,b.of)(null),this.notifier.unsubscribe()}ngOnInit(){this.route.paramMap.subscribe(e=>{e?.params?.id?(this.service.fetchBlogDetailData(e?.params?.id),this.isLoading=!1):(this.service.clearStore(),this.isLoading=!1)}),this.item=this.service.getBlogDetailData(),this.actionListener$.pipe((0,p.l4)(f.hu),(0,g.q)(1)).subscribe(()=>{setTimeout(()=>{this.isLoading=!1,this.router.navigate(["blogs"])},500)}),this.actionListener$.pipe((0,p.l4)(f.fo),(0,g.q)(1)).subscribe(()=>{setTimeout(()=>{this.isLoading=!1},500)})}upsertBlog(e){const{value:s}=e;this.isLoading=!0,this.service.upsertBlog(s)}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(u.gz),t.Y36(T.G),t.Y36(d.yh),t.Y36(u.F0),t.Y36(d.UO))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-upsert-blog-page"]],decls:3,vars:4,consts:[[4,"ngIf"],[3,"item","emitActionSubmit"]],template:function(o,s){1&o&&(t.YNc(0,B,2,1,"app-loading",0),t.TgZ(1,"app-upsert-blog-tpml",1),t.NdJ("emitActionSubmit",function(r){return s.upsertBlog(r)}),t.ALo(2,"async"),t.qZA()),2&o&&(t.Q6J("ngIf",s.isLoading),t.xp6(1),t.Q6J("item",t.lcZ(2,2,s.item)))},dependencies:[U.N,l.O5,x,l.Ov]})}return i})(),I=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[l.ez,a.UX]})}return i})();var y=n(8734);let S=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[y.I,l.ez,p.sQ,I,u.Bz.forChild([{path:"",component:C}])]})}return i})()}}]);